---
import Welcome from '../components/Welcome.astro';
import Layout from '../layouts/Layout.astro';
import hero from '../assets/hero_result.webp';


// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout>
	
<!-- Hero -->
<div class="relative bg-gradient-to-r from-purple-600 to-blue-600 h-screen text-white overflow-hidden">
  <div class="absolute inset-0">
    <img src={hero.src} alt="Background Image" class="object-cover object-center w-full h-full" />
    <div class="absolute inset-0 bg-black opacity-50"></div>
  </div>
  
  <div class="relative z-10 flex flex-col justify-center items-center h-full text-center">
    <h1 class="text-5xl font-bold leading-tight mb-4">Qumara, natural y sabroso</h1>
    <p class="text-lg text-gray-300 mb-8">
      Comienza bien tu d√≠a con un desayuno natural o termina con 
      una hamburguesa sabrosa. ¬°Delivery gratis en tu zona!
    </p>
    <a 
      href="https://wa.me/51967159171?text=Hola%2C%20vengo%20desde%20la%20p%C3%A1gina%20web%20y%20quiero%20realizar%20un%20pedido."
      target="_blank"
      class="bg-yellow-200 text-gray-900 hover:bg-yellow-400 py-2 px-6 rounded-full text-lg font-semibold transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-lg"
    >
      HAZ TU PEDIDO
    </a>
  </div>
</div>


<!-- Beneficios -->
<section class="py-12 bg-white text-center">
  <h3 class="text-2xl font-bold mb-10">¬øPor qu√© elegir Qumara?</h3>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 px-4 md:px-12">

    <div class="benefit-card">
      <div class="text-3xl mb-4">üå±</div>
      <h4 class="font-semibold mb-2">Ingredientes Naturales</h4>
      <p class="text-sm text-gray-600">Seleccionamos los mejores ingredientes frescos y naturales para garantizar sabor y calidad en cada bocado.</p>
    </div>

    <div class="benefit-card">
      <div class="text-3xl mb-4">üöö</div>
      <h4 class="font-semibold mb-2">Delivery Gratuito</h4>
      <p class="text-sm text-gray-600">Entrega gratis en zonas seleccionadas. Pedidos mayores a S/50 tienen delivery GRATIS a todo Trujillo.</p>
    </div>

    <div class="benefit-card">
      <div class="text-3xl mb-4">‚ö°</div>
      <h4 class="font-semibold mb-2">R√°pido y Confiable</h4>
      <p class="text-sm text-gray-600">Preparamos tu pedido al momento y lo entregamos en tiempo r√©cord. Calidad y rapidez garantizada.</p>
    </div>

  </div>
</section>


  	<!-- Productos -->
	<section class="px-4 md:px-12 py-10" id="productos">
	<div class="flex gap-4 justify-center mb-6">
		<button data-cat="desayunos" class="categoria-btn bg-black text-white px-4 py-2 rounded-full">DESAYUNOS</button>
		<button data-cat="sandwich" class="categoria-btn bg-gray-100 text-black px-4 py-2 rounded-full">SANDWICH</button>
		<button data-cat="hamburguesas" class="categoria-btn bg-gray-100 text-black px-4 py-2 rounded-full">HAMBURGUESAS</button>
	</div>

	<div id="productos-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6"></div>


	</section>



  <!-- Zonas de delivery -->
<!-- Zonas de delivery -->
<section class="bg-green-900 text-white text-center py-10 px-4">
  <h3 class="text-2xl font-bold mb-4">Zonas de Delivery Gratis</h3>
  <p class="mb-6">Llevamos tu comida favorita sin costo adicional a:</p>

  <div class="flex flex-wrap justify-center gap-4 mb-4">
    <span class="bg-yellow-200 text-black px-4 py-1 rounded-full font-semibold">PRIMAVERA</span>
    <span class="bg-yellow-200 text-black px-4 py-1 rounded-full font-semibold">QUINTANAS</span>
    <span class="bg-yellow-200 text-black px-4 py-1 rounded-full font-semibold">SANTA IN√âS</span>
    <span class="bg-yellow-200 text-black px-4 py-1 rounded-full font-semibold">PABLO CASAL</span>
    <span class="bg-yellow-200 text-black px-4 py-1 rounded-full font-semibold">MOCHICA</span>
    <span class="bg-yellow-200 text-black px-4 py-1 rounded-full font-semibold">NICOL√ÅS DE PIEROLA</span>
  </div>

  <p class="text-sm mb-4">¬øTu zona no est√° en la lista? <strong>¬°Cons√∫ltanos por WhatsApp!</strong></p>

<a
  href="https://wa.me/51967159171?text=Mi%20zona%20donde%20vivo%20no%20est%C3%A1%20con%20delivery%20gratis%2C%20%C2%BFcu%C3%A1nto%20me%20cobras%20a%20...%3F"
  target="_blank"
  class="inline-block bg-yellow-300 hover:bg-yellow-400 text-black font-semibold px-6 py-2 rounded-full shadow transition"
>
  üì≤ Consultar por WhatsApp
</a>

</section>

</Layout>


<script is:inline>
  const contenedor = document.getElementById("productos-grid");
  const botones = document.querySelectorAll(".categoria-btn");

  async function cargarProductos(categoria = "desayunos") {
    const res = await fetch("/data/productos.json");
    const productos = await res.json();
    const filtrados = productos.filter(p => p.categoria === categoria);

    contenedor.innerHTML = filtrados.map(p => `
      <div class="border rounded-lg shadow overflow-hidden">
        <img src="${p.imagen}" alt="${p.nombre}" class="w-full h-48 object-cover" />
        <div class="p-4 text-center">
          <h5 class="font-semibold">${p.nombre}</h5>
          <p class="text-sm text-gray-600 mt-1 mb-2">${p.descripcion}</p>
          <div class="flex justify-between items-center">
            <span class="text-lg font-bold">S/ ${p.precio.toFixed(2)}</span>
            <button  data-nombre="${p.nombre}" data-precio="${p.precio}" class="bg-green-900 pedido-btn text-white px-4 py-1 rounded cursor-pointer">HACER PEDIDO</button>
          </div>
        </div>
      </div>
    `).join('');
  }

  botones.forEach(btn => {
    btn.classList.add("cursor-pointer");

    btn.addEventListener("click", () => {
      botones.forEach(b => {
        b.classList.remove("bg-black", "text-white");
        b.classList.add("bg-gray-100", "text-black");
      });

      btn.classList.remove("bg-gray-100", "text-black");
      btn.classList.add("bg-black", "text-white");

      cargarProductos(btn.dataset.cat);
    });
  });

  // Activar primero
  cargarProductos("desayunos");
</script>


<script is:inline>
  const numeroWhatsapp = '51967159171';

  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('pedido-btn')) {
      const nombre = e.target.getAttribute('data-nombre');
      const precio = e.target.getAttribute('data-precio');
      const mensaje = `Hola, quiero pedir: ${nombre} (S/ ${parseFloat(precio).toFixed(2)})`;
      const url = `https://wa.me/${numeroWhatsapp}?text=${encodeURIComponent(mensaje)}`;
      window.open(url, '_blank');
    }
  });
</script>